<header class="fixed top-0 left-0 w-full z-50 bg-neutral-950/85 backdrop-blur-md border-b border-green/5 transition-all duration-300">
  <nav class="relative flex items-center justify-between max-w-7xl mx-auto px-6 h-20">

    <!-- LOGO -->
    <div class="flex-shrink-0">
      <a [routerLink]="['/']" (click)="scrollToTop()" class="flex items-center gap-2 group">
        <img 
          src="MueblixB.png" 
          alt="Mueblix" 
          class="h-10 w-auto object-contain transition-all"
          onerror="this.style.display='none'; this.nextElementSibling.style.display='block'"
        />
        <span class="hidden text-2xl font-bold tracking-tighter text-white">MUEBLIX</span>
      </a>
    </div>

    <!-- MENÚ PRINCIPAL (Desktop) -->
    <div class="hidden md:flex items-center space-x-8">
      <a [routerLink]="['/']" routerLinkActive="text-green-500"
         class="text-s font-bold text-gray-300 tracking-[0.2em] hover:text-green-400 transition-colors uppercase py-2 border-b-2 border-transparent hover:border-green-500/50">
        Inicio
      </a>
      <a [routerLink]="['/products']" routerLinkActive="text-green-500"
         class="text-s font-bold text-gray-300 tracking-[0.2em] hover:text-green-400 transition-colors uppercase py-2 border-b-2 border-transparent hover:border-green-500/50">
        Productos
      </a>
      <a [routerLink]="['/about']" routerLinkActive="text-green-500"
         class="text-s font-bold text-gray-300 tracking-[0.2em] hover:text-green-400 transition-colors uppercase py-2 border-b-2 border-transparent hover:border-green-500/50">
        Nosotros
      </a>
      <a [routerLink]="['/contact']" routerLinkActive="text-green-500"
         class="text-s font-bold text-gray-300 tracking-[0.2em] hover:text-green-400 transition-colors uppercase py-2 border-b-2 border-transparent hover:border-green-500/50">
        Contacto
      </a>
    </div>

    <!-- BOTONES DERECHA (Desktop) -->
    <div class="hidden md:flex items-center space-x-6">

      <!-- Carrito -->
      <div class="relative">
        <button [routerLink]="['/cart']" class="text-gray-300 hover:text-green-500 transition-colors relative group">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
            <path stroke-linecap="round" stroke-linejoin="round"
                  d="M15.75 10.5V6a3.75 3.75 0 10-7.5 0v4.5m11.356-1.993l1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 01-1.12-1.243l1.264-12A1.125 1.125 0 015.513 7.5h12.974c.576 0 1.059.435 1.119 1.007zM8.625 10.5a.375.375 0 11-.75 0 .375.375 0 01.75 0zm7.5 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z" />
          </svg>

          <span class="absolute -top-1 -right-1 bg-green-600 text-[10px] font-bold text-white w-4 h-4 rounded-full flex items-center justify-center">0</span>
        </button>
      </div>

      <!-- Login (NO TOKEN) -->
      <a *ngIf="!token"
         [routerLink]="['/auth/login']"
         class="group flex items-center gap-2 bg-white/10 hover:bg-green-600 text-white px-5 py-2.5 rounded-full transition-all duration-300 border border-white/10 hover:border-green-500">
        <span class="text-xs font-bold tracking-widest uppercase">Login</span>
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-4 h-4 group-hover:translate-x-1 transition-transform">
          <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3" />
        </svg>
      </a>

      <!-- Usuario (CON TOKEN) -->
      <div *ngIf="token" class="relative">

        <!-- Botón principal -->
        <button 
          (click)="toggleDropdown()"
          class="flex items-center gap-2 text-white font-semibold tracking-wide hover:text-green-400 transition-all">

          <span>Hola, {{ userName }}</span>

          <!-- Flecha -->
          <svg [class.rotate-180]="dropdownOpen"
               class="w-4 h-4 transition-transform"
               xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
          </svg>

        </button>

        <!-- DROPDOWN -->
        <div *ngIf="dropdownOpen"
             class="absolute right-0 mt-3 w-48 bg-neutral-900 border border-white/10 rounded-xl shadow-xl py-3 flex flex-col z-50 animate-fadeIn">

          <a [routerLink]="['/profile']"
             (click)="closeDropdown()"
             class="px-4 py-2 text-gray-300 hover:text-white hover:bg-neutral-800 rounded-lg transition">
            Perfil
          </a>

          <a [routerLink]="['/pedidos']"
             (click)="closeDropdown()"
             class="px-4 py-2 text-gray-300 hover:text-white hover:bg-neutral-800 rounded-lg transition">
            Mis pedidos
          </a>

          <button 
            (click)="logout()"
            class="px-4 py-2 text-red-400 hover:text-white hover:bg-red-600/30 rounded-lg text-left transition">
            Cerrar sesión
          </button>
        </div>

      </div>

    </div>

    <!-- BOTÓN MENÚ MÓVIL -->
    <div class="md:hidden flex items-center gap-4">

      <button [routerLink]="['/cart']" class="text-white hover:text-green-500">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
          <path stroke-linecap="round" stroke-linejoin="round"
                d="M15.75 10.5V6a3.75 3.75 0 10-7.5 0v4.5m11.356-1.993l1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 01-1.12-1.243l1.264-12A1.125 1.125 0 015.513 7.5h12.974c.576 0 1.059.435 1.119 1.007zM8.625 10.5a.375.375 0 11-.75 0 .375.375 0 01.75 0zm7.5 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z" />
        </svg>
      </button>

      <button (click)="toggleMobileMenu()" class="text-white p-2">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-8 h-8">
          <path stroke-linecap="round" stroke-linejoin="round"
                d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
        </svg>
      </button>
    </div>

  </nav>

  <!-- MENÚ MÓVIL -->
  <div class="md:hidden absolute top-20 left-0 w-full bg-neutral-950 border-b border-white/10 shadow-2xl
              overflow-hidden transition-all duration-300 ease-in-out"
       [class.max-h-0]="!isMobileMenuOpen"
       [class.max-h-screen]="isMobileMenuOpen"
       [class.opacity-0]="!isMobileMenuOpen"
       [class.opacity-100]="isMobileMenuOpen">

    <div class="flex flex-col p-6 space-y-6">

      <a [routerLink]="['/']" (click)="closeMobileMenu()" class="text-xl font-bold text-white hover:text-green-500 tracking-wider border-b border-white/5 pb-4">INICIO</a>
      <a [routerLink]="['/products']" (click)="closeMobileMenu()" class="text-xl font-bold text-white hover:text-green-500 tracking-wider border-b border-white/5 pb-4">PRODUCTOS</a>
      <a [routerLink]="['/about']" (click)="closeMobileMenu()" class="text-xl font-bold text-white hover:text-green-500 tracking-wider border-b border-white/5 pb-4">NOSOTROS</a>
      <a [routerLink]="['/contact']" (click)="closeMobileMenu()" class="text-xl font-bold text-white hover:text-green-500 tracking-wider border-b border-white/5 pb-4">CONTACTO</a>

      <!-- LOGIN MOBILE -->
      <a *ngIf="!token"
         [routerLink]="['/auth/login']"
         (click)="closeMobileMenu()"
         class="bg-green-600 text-white py-3 rounded-xl text-center font-bold uppercase tracking-widest shadow-lg shadow-green-900/50">
        Iniciar Sesión
      </a>

      <!-- USER MOBILE -->
      <div *ngIf="token" class="flex flex-col space-y-4 text-white mt-4">

        <span class="text-lg font-bold text-center">Hola, {{ userName }}</span>

        <a [routerLink]="['/profile']"
           (click)="closeMobileMenu()"
           class="bg-neutral-800 py-3 rounded-xl text-center hover:bg-neutral-700 transition">
          Perfil
        </a>

        <a [routerLink]="['/pedidos']"
           (click)="closeMobileMenu()"
           class="bg-neutral-800 py-3 rounded-xl text-center hover:bg-neutral-700 transition">
          Mis pedidos
        </a>

        <button 
          (click)="logout()"
          class="bg-red-600/30 hover:bg-red-600 text-white py-3 rounded-xl font-bold uppercase tracking-widest transition">
          Cerrar sesión
        </button>

      </div>

    </div>
  </div>

</header>
