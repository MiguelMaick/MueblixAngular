<main class="bg-neutral-950 text-white min-h-screen selection:bg-green-500 selection:text-black pb-24">

  <!-- HEADER -->
  <section class="relative pt-32 pb-12 px-6 text-center border-b border-white/5">
    <div #animateItem class="opacity-0 translate-y-8 transition-all duration-1000 ease-out max-w-3xl mx-auto">
        <span class="text-green-500 font-bold tracking-[0.3em] uppercase text-lg md:text-sm mb-4 block">Catálogo 2025</span>
        <h1 class="text-4xl md:text-6xl font-bold tracking-tight mb-4">
            Diseño para <span class="text-transparent bg-clip-text bg-gradient-to-r from-white to-green-600">vivir mejor.</span>
        </h1>
        <p class="text-gray-400 max-w-xl mx-auto">
            Explora nuestra selección de piezas que definen espacios y crean atmósferas únicas.
        </p>
    </div>
  </section>

  <!-- FILTROS -->
  <section #animateItem class="opacity-0 translate-y-4 transition-all duration-1000 ease-out delay-100 sticky top-0 z-40 w-full bg-neutral-950/80 backdrop-blur-md border-b border-white/10 py-4 px-6">
    <div class="max-w-7xl mx-auto flex flex-wrap justify-center md:justify-between gap-4 items-center">
        <app-categoria (categoriaSeleccionada)="filtrarPorCategoria($event)"></app-categoria>

        <app-filtro-precio (precioChange)="filtrarPorPrecio($event)"></app-filtro-precio>

    </div>
  </section>

<!-- GRID DE PRODUCTOS -->
<section class="max-w-7xl mx-auto px-6 pt-12 pb-20">
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-y-12 gap-x-8">

    <div
      *ngFor="let producto of productos"
      #animateItem 
      class="opacity-0 translate-y-12 transition-all duration-700 ease-out delay-100 
             group flex flex-col h-full">

      <!-- TARJETA COMPLETA -->
      <div class="flex flex-col h-full bg-transparent">

        <!-- IMAGEN -->
        <div class="relative aspect-[4/5] w-full overflow-hidden rounded-2xl 
                    bg-neutral-900 mb-5 border border-white/5">
          
          <div class="absolute top-4 left-4 bg-green-600 text-white text-[10px] 
                      font-bold px-3 py-1 rounded-full tracking-widest uppercase">
            Nuevo
          </div>

          <img 
            [src]="'http://localhost:3000/img/producto/' + producto.imagen" 
            alt="{{ producto.nombre }}" 
            class="w-full h-full object-cover group-hover:scale-110 transition-all duration-500"
          >

          <button  
            (click)="abrirVistaRapida(producto)"
            class="absolute bottom-4 right-4 bg-white text-black w-10 h-10 rounded-full 
                   flex items-center justify-center opacity-0 translate-y-4 
                   group-hover:opacity-100 group-hover:translate-y-0 
                   transition-all duration-300 hover:bg-green-500 hover:text-white shadow-lg"
            title="Vista Rápida">
              <i class="fa-solid fa-eye"></i>
          </button>
        </div>

        <!-- INFORMACIÓN -->
        <div class="text-left flex flex-col gap-1 mb-4">
          <h3 class="text-lg font-bold text-white group-hover:text-green-500 transition-colors">
            {{ producto.nombre }}
          </h3>

          <p class="text-sm text-gray-400">
            {{ producto.categoria.nombre }}
          </p>

          <p class="text-lg font-semibold text-white mt-2">
            $ {{ producto.precio }}
          </p>
        </div>

        <!-- ESPACIADOR PARA QUE TODAS MIDAN LO MISMO -->
        <div class="flex-grow"></div>

        <!-- BOTONES -->
        <div class="grid grid-cols-5 gap-2 mt-4">

          <button 
            class="col-span-4 bg-white text-black font-bold py-3 px-4 rounded-xl 
                   hover:bg-green-500 hover:text-white transition-all duration-300 
                   text-sm uppercase tracking-wider">
            Comprar
          </button>

          <button
            (click)="agregarAlCarrito(producto)"
            class="col-span-1 border border-white/20 text-white rounded-xl 
                   hover:border-green-500 hover:text-green-500 transition-all 
                   flex items-center justify-center"
            title="Agregar al carrito">
              <i class="fa-solid fa-cart-plus"></i>
          </button>

        </div>

      </div>

    </div>

  </div>
</section>


  <!-- SCROLL TOP -->
  <button
    id="btnScrollTop"
    class="fixed right-6 bottom-6 bg-green-600 hover:bg-green-500 text-white w-12 h-12 rounded-full shadow-[0_0_15px_rgba(34,197,94,0.5)] hover:shadow-[0_0_25px_rgba(34,197,94,0.8)] transition-all duration-300 z-50 flex items-center justify-center group"
    (click)="scrollToTop()">
      <i class="fa-solid fa-arrow-up group-hover:-translate-y-1 transition-transform"></i>
  </button>

  <div 
    *ngIf="mostrarToast"
    class="fixed bottom-6 right-6 bg-neutral-800 border border-green-600 text-white px-6 py-3 rounded-xl shadow-lg animate-fadeIn z-50 flex items-center gap-3">

    <i class="fa-solid fa-circle-check text-green-500 text-xl"></i>
    <span class="font-semibold">{{ mensajeCarrito }}</span>
  </div>

  <!-- MODAL PRODUCTO -->
  <app-modal-producto 
    *ngIf="productoSeleccionado"
    [producto]="productoSeleccionado"
    (cerrar)="cerrarVistaRapida()">
  </app-modal-producto>

</main>
